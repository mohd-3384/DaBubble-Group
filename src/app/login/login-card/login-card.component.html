<main>
  <mat-card appearance="outlined">
    <mat-card-header>
      <mat-card-title>Anmelden</mat-card-title>
      <mat-card-subtitle>
        Wir empfehlen dir, die E-Mail-Adresse zu nutzen, die du bei der Arbeit verwendest.
      </mat-card-subtitle>
    </mat-card-header>

    <!-- Angular-Form -->
    <form #f="ngForm" (ngSubmit)="login()">

      <div class="input-container">
        <!-- E-Mail -->
        <div class="span-input">
          <div class="mail-input">
            <img src="./public/images/mail-icon.svg" alt="email icon">
            <input type="email" name="email" [(ngModel)]="email" required email placeholder="beispielname@email.com" />
          </div>
          <span class="wrong-password" *ngIf="f.submitted && f.controls['email']?.errors?.['email']">
            *Diese E-Mail-Adresse ist leider ungültig.
          </span>
        </div>

        <!-- Passwort -->
        <div class="span-input">
          <div class="password-input">
            <img src="./public/images/password-icon.svg" alt="password icon" class="password-icon">
            <input [type]="showPassword ? 'text' : 'password'" name="password" [(ngModel)]="password"
              placeholder="Passwort" required minlength="6">
            <button type="button" class="password-toggle" (click)="togglePassword()"
              [attr.aria-label]="showPassword ? 'Passwort verbergen' : 'Passwort anzeigen'">
              <svg *ngIf="!showPassword" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M12 5c5.5 0 9.5 5.1 9.5 7s-4 7-9.5 7S2.5 14 2.5 12 6.5 5 12 5zm0 2c-4 0-7 3.9-7 5s3 5 7 5 7-3.9 7-5-3-5-7-5zm0 2.5A2.5 2.5 0 1 1 9.5 12 2.5 2.5 0 0 1 12 9.5z" />
              </svg>
              <svg *ngIf="showPassword" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M3.3 4.7 4.7 3.3l16 16-1.4 1.4-3-3A9.9 9.9 0 0 1 12 19c-5.5 0-9.5-5.1-9.5-7a9.6 9.6 0 0 1 4.1-5.9L3.3 4.7zM8 9.4a4 4 0 0 0 5.6 5.6l-1.5-1.5a2 2 0 0 1-2.6-2.6L8 9.4zm4-4.4c5.5 0 9.5 5.1 9.5 7a9.3 9.3 0 0 1-3 5.1l-1.5-1.5A7.9 7.9 0 0 0 19.5 12c0-1.1-3-5-7.5-5a7.7 7.7 0 0 0-2.6.4L7.9 5.9A9.9 9.9 0 0 1 12 5z" />
              </svg>
            </button>
          </div>
          <span class="wrong-password" *ngIf="password.length > 0 && password.length < 6">
            Das Passwort muss mindestens 6 Zeichen lang sein.
          </span>
          <span class="wrong-password" *ngIf="loginErrorMessage">
            {{ loginErrorMessage }}
          </span>
        </div>
      </div>

      <div class="forgot-password" (click)="onForgotPasswordClick()">Passwort vergessen?</div>

      <div class="oder-container">
        <div class="line"></div>
        <div class="oder-text">ODER</div>
        <div class="line"></div>
      </div>

      <button (click)="loginWithGoogle()" class="google-login" type="button">
        <img src="./public/images/google-icon.svg" alt="google-icon">
        <span>Anmelden mit Google</span>
      </button>
      <span class="wrong-password" *ngIf="googleErrorMessage">{{ googleErrorMessage }}</span>

      <div class="button-container">
        <button class="button_1" type="submit" [disabled]="f.invalid">
          Anmelden
        </button>

        <button class="button_2" type="button" (click)="loginAsGuest()">
          Gäste-Login
        </button>
      </div>
    </form>
  </mat-card>
</main>
